"use strict";function applyWildCard(e){return e+"ï¿°"}Object.defineProperty(exports,"__esModule",{value:!0});var caribviper_common_1=require("caribviper-common"),IDbQueryResultGeneric=function(){return function(){}}();exports.IDbQueryResultGeneric=IDbQueryResultGeneric;var DbSelectorValue=function(){function e(e,t,r){this.selector=e,this.propertyContainer=t,this.propertyName=r,caribviper_common_1.Assert.isTruthy(t,"DbSelectorValue: Invalid parent object"),caribviper_common_1.Assert.isTruthy(r,"DbSelectorValue: Invalid property name"),caribviper_common_1.Assert.isTruthy(e,"DbSelectorValue: Invalid sector")}return Object.defineProperty(e.prototype,"property",{get:function(){return this.propertyContainer[this.propertyName]},set:function(e){this.propertyContainer[this.propertyName]=e},enumerable:!0,configurable:!0}),e.prototype.withValue=function(e){if("string"==typeof e||"number"==typeof e||"boolean"==typeof e){if(this.property)throw new Error("DbSelectorValue: Cannot assign literal to object");this.property=e}else{if(this.property||(this.property={}),"string"==typeof this.property||"number"==typeof this.property)throw new Error("DbSelectorValue: Cannot assign object to literal");this.property[e.propertyName]=e.value}return this},e.prototype.withObjectValue=function(e){if(!e)throw new Error("DbSelectorValue: Cannot past a falsey item object to withObject");return this.property=e,this},e.prototype.on=function(){return this.selector},e.createPropertyValue=function(e,t){caribviper_common_1.Assert.isTruthy(e,"DbSelectorValue: Property field cannot be null/empty");var r={};return r[caribviper_common_1.Utilities.getPropertyName(e)]=t,r},e.createPropertyArrayValue=function(e,t){caribviper_common_1.Assert.isTruthy(e,"DbSelectorValue: Property fields cannot be null/empty"),caribviper_common_1.Assert.isTruthy(t,"DbSelectorValue: Property values cannot be null/empty"),caribviper_common_1.Assert.isTruthy(Array.isArray(e),"DbSelectorValue: fields must be an array"),caribviper_common_1.Assert.isTruthy(Array.isArray(t),"DbSelectorValue: values must be an array"),caribviper_common_1.Assert.isTruthy(e.length>0,"DbSelectorValue: fields empty"),caribviper_common_1.Assert.isTruthy(t.length>0,"DbSelectorValue: values empty"),caribviper_common_1.Assert.isTruthy(t.length===e.length,"DbSelectorValue: feilds and values must be the same length");for(var r=[],o=0;o<e.length;o++)r.push(this.createPropertyValue(e[o],t[o]));return r},e}();exports.DbSelectorValue=DbSelectorValue;var DbSelectorAsValue=function(){function e(e,t,r){this.selector=e,this.propertyContainer=t,this.propertyName=r,caribviper_common_1.Assert.isTruthy(t,"DbSelectorValue: Invalid parent object"),caribviper_common_1.Assert.isTruthy(r,"DbSelectorValue: Invalid property name"),caribviper_common_1.Assert.isTruthy(e,"DbSelectorValue: Invalid sector"),this.property=[]}return Object.defineProperty(e.prototype,"property",{get:function(){return this.propertyContainer[this.propertyName]},set:function(e){this.propertyContainer[this.propertyName]=e},enumerable:!0,configurable:!0}),e.prototype.withSelector=function(e){return this.property.push(e.selector),this},e.prototype.withObject=function(e){if(!e)throw new Error("DbSelectorAsValue: Cannot past a falsey item object to withObject");return this.property.push(e),this},e.prototype.withObjectArray=function(e){var t=this;if(!e)throw new Error("DbSelectorAsValue: Cannot past a falsey items object to withObjectArray");return e.forEach(function(e){t.withObject(e)}),this},e.prototype.withObjectValue=function(e,t){caribviper_common_1.Assert.isTruthy(e,"DbSelector: Property field cannot be null/empty");caribviper_common_1.Utilities.getPropertyName(e);if(!t)throw new Error("DbSelectorAsValue: Cannot past a falsey value object to withObjectValue");return this.property.push(DbSelectorValue.createPropertyValue(e,t)),this},e.prototype.on=function(){return this.selector},e}();exports.DbSelectorAsValue=DbSelectorAsValue;var DbSelector=function(){function e(e){void 0===e&&(e={}),this.selectorObject=e}return e.create=function(){return new e},e.createOr=function(){var t=new e;return t.withSelectorProperty("$or"),t},e.createWithProperty=function(t,r){return(new e).withProperty(caribviper_common_1.Utilities.getPropertyName(t)).withValue(r).on()},e.createWithObjectValue=function(t,r){return void 0===r&&(r={}),(new e).withProperty(caribviper_common_1.Utilities.getPropertyName(t)).withObjectValue(r).on()},Object.defineProperty(e.prototype,"selector",{get:function(){return this.selectorObject},enumerable:!0,configurable:!0}),e.prototype.withProperty=function(e){caribviper_common_1.Assert.isTruthy(e,"DbSelector: Property field cannot be null/empty");var t=caribviper_common_1.Utilities.getPropertyName(e);return new DbSelectorValue(this,this.selectorObject,t)},e.prototype.withSelectorProperty=function(e){caribviper_common_1.Assert.isTruthy(e,"DbSelector: Property field cannot be null/empty");var t=caribviper_common_1.Utilities.getPropertyName(e);return new DbSelectorAsValue(this,this.selectorObject,t)},e.prototype.withSelectorPropertyOr=function(){return this.selectorObject.$or,new DbSelectorAsValue(this,this.selectorObject,"$or")},e.prototype.withSelectorPropertyAnd=function(){return new DbSelectorAsValue(this,this.selectorObject,"$and")},e.prototype.changePropertyValue=function(e,t){caribviper_common_1.Assert.isTruthy(e,"DbSelector: Property field cannot be null/empty");var r=caribviper_common_1.Utilities.getPropertyName(e);caribviper_common_1.Assert.isTruthy(this.selectorObject[r],"DbSelector: Property field passed does not exist","DbSelector"),this.selectorObject[r]=t},e.prototype.removeProperty=function(e){caribviper_common_1.Assert.isTruthy(e,"DbSelector: Property field cannot be null/empty");var t=caribviper_common_1.Utilities.getPropertyName(e);this.selectorObject[t]&&delete this.selectorObject[t]},e}();exports.DbSelector=DbSelector;var DbSortManager=function(){function e(){}return e.createSortValue=function(e){return caribviper_common_1.Utilities.getPropertyName(e)},e.createSortArray=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.createSortValue(e))}),r},e}();exports.DbSortManager=DbSortManager;var DbQueryObject=function(){return function(e,t,r,o,i){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===o&&(o=void 0),void 0===i&&(i=void 0),this.selector=e.selector?e.selector:e,this.fields=t||[],this.sort=r||[],this.limit=!o||o<1?void 0:o,this.use_index=i||void 0}}();exports.DbQueryObject=DbQueryObject;var DbFetchOptions=function(){return function(){this.include_docs=!1}}();exports.DbFetchOptions=DbFetchOptions,exports.applyWildCard=applyWildCard;